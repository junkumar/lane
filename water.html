<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Water in the West - California flows</title>
</head>
<body>

  <div id="cm-example" style="width: 1400px; height: 740px"></div>

<script type="text/javascript" 	src="data.js"></script>

<script type="text/javascript" src="http://tile.cloudmade.com/wml/latest/web-maps-lite.js"></script>

<script type="text/javascript">
    var cloudmade = new CM.Tiles.CloudMade.Web(
	{
		key: 'f959c281de0346a38d634933ae3a5955', 
		"styleId":998, // stamen pale dawn
//        styleId: 21557 // bikemap - monochrome		
//        styleId: 997, // super simple with no state or urban markings
	});
	
	var map = new CM.Map('cm-example', cloudmade);
	map.setCenter(new CM.LatLng(37.7533,-122.4293), 6); // SF
	
	map.addControl(new CM.LargeMapControl());
	map.addControl(new CM.ScaleControl());
	map.addControl(new CM.OverviewMapControl());
	
//    document.writeln(sites+'<BR>'); // dump for debugging

	var markers = [];
	for (var i = 0; i < sites.length; i++) {
		var myMarker = new CM.Marker(new CM.LatLng(sites[i][2], sites[i][3]),
								   { title: sites[i][1] });
		
		markers.push(myMarker);
//		map.addOverlay(myMarker); // Only used if the clusterer is not to overlay the markers.
	}
	
	var clusterer = new CM.MarkerClusterer(map, {clusterRadius: 70});
	clusterer.addMarkers(markers);

  </script>

</body>
</html>